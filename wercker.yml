# wercker ci
${FTP_USERNAME}: "gurezo"
${FTP_PASSWORD}: "yamahaow01"
${FTP_SERVER_URL}: "http://azureciexample.azurewebsites.net"

before_install:
- export CHROME_BIN=chromium-browser

box: node
build:
  steps:
    - npm-install
# npm-test pipe line test
    - npm-test
    - script:
        name: echo nodejs information
        code: |
          echo "node version $(node -v) running"
          echo "npm version $(npm -v) running"
deploy:
  steps:
    - script:
        name: install angular-cli
        code: |
          npm install -g angular-cli
    - script:
        name: ng build
        code: |
          ng build
    - install-packages:
        packages: lftp
    - script:
        name: azure ftp deploy
        code: |
          lftp -u ${FTP_USERNAME},${FTP_PASSWORD} -e "mirror -Rev dist/. /site/wwwroot/." ${FTP_SERVER_URL}
